<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>Database Change Notification Oracle &mdash; Tuhalang</title><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/components/collection.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/globals/common.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/css/posts/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/mzlogin/rouge-themes@master/dist/github.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/share.js/dist/css/share.min.css"><link rel="canonical" href="https://tuhalang.github.io/2020/12/06/Database-Change-Notification-Oracle/"><link rel="alternate" type="application/atom+xml" title="Tuhalang" href="https://tuhalang.github.io/feed.xml"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/favicon.ico"><meta property="og:title" content="Database Change Notification Oracle"><meta name="keywords" content="Database, Oracle"><meta name="og:keywords" content="Database, Oracle"><meta name="description" content="Tóm tắt: Trong bài viết này chúng ta sẽ cùng tìm hiểu về Database Change Notification Oracle hoạt động như thế nào và khi nào thì chúng ta nên sử dụng nó?"><meta name="og:description" content="Tóm tắt: Trong bài viết này chúng ta sẽ cùng tìm hiểu về Database Change Notification Oracle hoạt động như thế nào và khi nào thì chúng ta nên sử dụng nó?"><meta property="og:url" content="https://tuhalang.github.io/2020/12/06/Database-Change-Notification-Oracle/"><meta property="og:site_name" content="Tuhalang"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2020-12-06"> <script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/jquery-ui.js"></script> <script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/main.js"></script> <script data-ad-client="ca-pub-7093222719567591" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-161740789-1"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-161740789-1'); </script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://tuhalang.github.io/" title="Tuhalang"><span class="octicon octicon-mark-github"></span> Tuhalang</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://tuhalang.github.io/" class=" site-header-nav-item" target="" title="Home">Home</a> <a href="https://tuhalang.github.io/categories/" class=" site-header-nav-item" target="" title="Categories">Categories</a> <a href="https://tuhalang.github.io/archives/" class=" site-header-nav-item" target="" title="Archives">Archives</a> <a href="https://tuhalang.github.io/wiki/" class=" site-header-nav-item" target="" title="Wiki">Wiki</a> <a href="https://tuhalang.github.io/about/" class=" site-header-nav-item" target="" title="About">About</a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="Database Change"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">Database Change Notification Oracle</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2020/12/06 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://tuhalang.github.io/categories/#Oracle" title="Oracle">Oracle</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://tuhalang.github.io/categories/#Database" title="Database">Database</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> Common 1569 words，about 5 minutes </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><p><strong>Tóm tắt:</strong> Trong bài viết này chúng ta sẽ cùng tìm hiểu về <strong>Database Change Notification Oracle</strong> hoạt động như thế nào và khi nào thì chúng ta nên sử dụng nó?</p><h4 id="1-database-change-notification-oracle-là-gì">1. Database Change Notification Oracle là gì?</h4><ul><li><p>Đây là một tính năng của database Oracle được sử dụng để thông báo các thay đổi của các bản ghi trong database</p></li><li><p>Thông báo sẽ được đẩy về sau khi transaction được commit</p></li><li><p>JDBC driver có thể đăng kí câu lệnh truy vấn với database và nhận thông báo phản hồi theo các trường hợp sau:</p><ul><li><p>DML hoặc DDL thay đổi một đối tượng liên kết với câu truy vấn</p></li><li><p>DML hoặc DDL thay đổi kết quả của câu truy vấn</p></li></ul></li></ul><h4 id="2-các-bước-thực-hiện-để-đăng-kí-nhận-thông-báo">2. Các bước thực hiện để đăng kí nhận thông báo</h4><ul><li><p>Registration: thực hiện đăng kí nhận thông báo từ database</p></li><li><p>Query association: sau khi thực hiện đăng kí, chúng ta cần thực hiện liên kết các câu truy vấn với nó. Các câu truy vấn này là một phần của đăng kí</p></li><li><p>Notification: thông báo được tạo để đáp ứng lại những thay đổi từ bảng hoặc kết kết quả theo câu truy vấn. Oracle sẽ gửi các thông báo này thông qua JDBC driver</p></li></ul><h4 id="3-database-change-notification-được-dùng-trong-trường-hợp-nào">3. Database Change Notification được dùng trong trường hợp nào?</h4><ul><li><p>Bản thân mình khi gặp được một task ở công ty là quét các thay đổi của bảng log trong database Oracle để xử lý logic nghiệp vụ đã nghĩ đến việc sử dụng Oracle Change Notification tuy nhiên sau khi tìm hiểu thì đã thấy nó không phù hợp cho việc này bởi các vì:</p><ul><li><p>Các sự kiện được thông báo về theo cơ chế đồng bộ (sự kiện trước được xử lý xong thì sự kiện sau mới được thông báo tiếp)</p></li><li><p>Trong thông báo chỉ cho chúng ta thông tin về rowid mà không bao gồm cả dòng dữ liệu mà chúng ta sẽ phải query lại để lấy dữ liệu</p></li><li><p>Mỗi lần chỉ trả về thông tin của một bản ghi thay đổi</p></li></ul></li></ul><p>=&gt; Do bảng log sẽ được cập nhật liên tục nên việc xử lý các sự kiện tuần tự và phải query lại mỗi bản ghi cho mỗi lần xử lý sẽ làm giảm hiệu năng của hệ thống</p><ul><li>Vì thế như khuyến cáo từ document của Oracle thì Database Change Notification chỉ nên dùng cho các trường hợp dữ liệu thay đổi ít như để cập nhật thông tin cho cache khi có thay đổi từ database.</li></ul><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>Document Informations</h3><ul><li>Author: <a href="https://tuhalang.github.io" target="_blank">Tuhalang</a></li><li>Link: <a href="https://tuhalang.github.io/2020/12/06/Database-Change-Notification-Oracle/" target="_blank">https://tuhalang.github.io/2020/12/06/Database-Change-Notification-Oracle/</a></li><li>Copyright: <a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">Creative Commons 3.0 License</a></li></ul></div></article><div class="share"><div class="share-component" data-disabled='qq,weibo,wechat,douban,qzone'></div></div><div class="comment"><div id="gitalk-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/gitalk/gitalk.css"> <script src="https://cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script> <script> var gitalk = new Gitalk({ id: '/2020/12/06/Database-Change-Notification-Oracle/', clientID: 'ee780ad580c724383fc9', clientSecret: 'b27916ae861218d97f817647e98288467e8f1ed0', repo: 'blog-comments', owner: 'tuhalang', admin: ['tuhalang'], labels: ['gitment'], perPage: 50, }); gitalk.render('gitalk-container'); </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@built/assets/search_data.json?v=1663407020', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/jquery.toc.js"></script> <ins class="adsbygoogle" style="display:inline-block;width:300px;height:250px" data-ad-client="ca-pub-7093222719567591" data-ad-slot="2908164598"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script></div></div></section><footer class="container"> <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7093222719567591" data-ad-slot="5263168187" data-ad-format="auto" data-full-width-responsive="true"></ins> <script> (adsbygoogle = window.adsbygoogle || []).push({}); </script><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2022 <span title="Tuhalang">Tuhalang</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/tuhalang/tuhalang.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://tuhalang.github.io/" title="Home" target="">Home</a></li><li> <a href="https://tuhalang.github.io/categories/" title="Categories" target="">Categories</a></li><li> <a href="https://tuhalang.github.io/archives/" title="Archives" target="">Archives</a></li><li> <a href="https://tuhalang.github.io/wiki/" title="Wiki" target="">Wiki</a></li><li> <a href="https://tuhalang.github.io/about/" title="About" target="">About</a></li><li><a href="https://tuhalang.github.io/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/vendor/share.js/dist/js/share.min.js"></script> <script src="https://cdn.jsdelivr.net/gh/tuhalang/tuhalang.github.io@master/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
